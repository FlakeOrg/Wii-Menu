<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wii Menu Clone</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #e5e5e5, #dcdcdc);
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .menu {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(3, 120px);
      gap: 10px;
      padding: 20px;
      flex: 1;
    }

    .channel {
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 1.2rem;
      color: #000;
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      border: 2px solid #b3d3f7;
      border-radius: 22px;
      box-shadow: 0 2px 8px rgba(120, 170, 220, 0.18),
                  0 0.5px 1px rgba(255,255,255,0.25) inset;
      height: 120px;
      width: 100%;
      box-sizing: border-box;
      text-shadow: 0 1px 0 #ffffff;
      transition: background 0.2s, box-shadow 0.2s, transform 0.2s, opacity 0.18s;
      cursor: pointer;
      outline: none;
      position: relative;
      user-select: none;
    }

    .channel:hover {
      z-index: 2;
      transform: scale(1.14);
      box-shadow: 0 8px 32px rgba(60,120,220,0.28),
                  0 2px 8px #b3d3f7,
                  0 0.5px 1px rgba(255,255,255,0.35) inset;
      border-color: #3399ff;
      background: linear-gradient(180deg, #e2effc 0%, #cbe7ff 100%);
      color: #004080;
    }

    .channel.selected {
      z-index: 2;
      transform: scale(1.14);
      box-shadow: 0 8px 32px rgba(60,120,220,0.28),
                  0 2px 8px #b3d3f7,
                  0 0.5px 1px rgba(255,255,255,0.35) inset;
      border-color: #3399ff;
      background: linear-gradient(180deg, #e2effc 0%, #cbe7ff 100%);
      color: #004080;
    }

    .channel:not(.selected) {
      opacity: 0.64;
      transition: opacity 0.18s, transform 0.2s;
    }

    .remove-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: red;
      color: white;
      border: none;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      font-size: 14px;
      cursor: pointer;
      display: none;
    }

    .channel.edit-mode .remove-btn {
      display: block;
    }

    .channel.edit-mode {
      cursor: grab;
    }

    .channel.edit-mode:active {
      cursor: grabbing;
    }

    .bottombar {
      background: #f4f4f4;
      border-top: 2px solid #ccc;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      font-size: 18px;
      position: relative; /* allow absolute centering */
    }

    .date-time {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-weight: bold;
      white-space: nowrap;
    }

    .icons {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .icon {
      width: 40px;
      height: 40px;
      border-radius: 100%;
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #b3d3f7;
    }

    .add-channel-btn, .toggle-edit-btn {
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      border: 2px solid #b3d3f7;
      color: black;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.2s;
      box-shadow: 0 2px 8px rgba(120, 170, 220, 0.18),
                  0 0.5px 1px rgba(255,255,255,0.25) inset;
    }

    .add-channel-btn:hover, .toggle-edit-btn:hover {
      background: linear-gradient(180deg, #e2effc 0%, #f8fcff 100%);
    }

    .toggle-edit-btn.active {
      background: #e67e22;
    }

    /* --- Zoom / fade effect --- */
    .channel.opening {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 80vw;
      height: 80vh;
      transform: translate(-50%, -50%) scale(1);
      z-index: 999;
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      border-radius: 22px;
      transition: all 0.6s ease;
    }

    .channel.fade-out {
      opacity: 0;
      transform: translate(-50%, -50%) scale(1.2);
    }

    /* --- Overlay (Wii Menu / Start) --- */
    .channel-overlay {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: linear-gradient(to top, #e5e5e5, #dcdcdc);
      border-top: 2px solid #aaa;
      display: flex;
      justify-content: center;
      gap: 40px;
      padding: 20px 0;
      z-index: 1000;
      opacity: 0;
      transform: translateY(100%);
      transition: all 0.5s ease;
    }

    .channel-overlay.show {
      opacity: 1;
      transform: translateY(0);
    }

    .channel-overlay button {
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      border: 2px solid #b3d3f7;
      border-radius: 12px;
      font-size: 18px;
      padding: 12px 30px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15),
                  0 0.5px 1px rgba(255,255,255,0.25) inset;
      transition: background 0.2s, transform 0.2s;
    }

    .channel-overlay button:hover {
      background: linear-gradient(180deg, #e2effc 0%, #f8fcff 100%);
      transform: scale(1.05);
    }

    /* --- Popup Modal --- */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal.show {
      display: flex;
      opacity: 1;
    }

    .modal-content {
      background: white;
      padding: 20px 30px;
      border-radius: 14px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.25);
      text-align: center;
      width: 320px;
      animation: popIn 0.25s ease;
    }

    .modal-content h2 {
      margin-bottom: 15px;
    }

    .modal-content label {
      display: block;
      margin: 10px 0;
      text-align: left;
      font-size: 14px;
    }

    .modal-content input {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal-buttons {
      margin-top: 20px;
      display: flex;
      justify-content: space-around;
    }

    .modal-buttons button {
      background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
      border: 2px solid #b3d3f7;
      padding: 8px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      transition: background 0.2s, transform 0.2s;
    }

    .modal-buttons button:hover {
      background: linear-gradient(180deg, #e2effc 0%, #f8fcff 100%);
      transform: scale(1.05);
    }

    @keyframes popIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* --- Channel background overlay --- */
    #channelBackground {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(to bottom, #e5e5e5, #dcdcdc);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
      z-index: 800;
    }
    #channelBackground.show {
      opacity: 1;
    }

/* Image mode styling */
.image-mode .channel {
  font-size: 0; /* Hide text */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.image-mode .channel::after {
  content: "";
  display: block;
  padding-top: 60%; /* keep consistent height ratio */
}

.image-mode .remove-btn {
  font-size: 14px; /* keep remove button visible */
}

.toggle-image-btn {
  background: linear-gradient(180deg, #f8fcff 0%, #e2effc 100%);
  border: 2px solid #b3d3f7;
  color: black;
  padding: 10px 15px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.2s;
  box-shadow: 0 2px 8px rgba(120, 170, 220, 0.18),
              0 0.5px 1px rgba(255,255,255,0.25) inset;
}

  </style>
</head>
<body>

  <div class="menu" id="menu">
    <div class="channel">Disc Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Mii Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Photo Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Shop Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Forecast Channel <button class="remove-btn">✖</button></div>
    <div class="channel">News Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Mii Parade <button class="remove-btn">✖</button></div>
    <div class="channel">Wii Settings <button class="remove-btn">✖</button></div>
    <div class="channel">Internet <button class="remove-btn">✖</button></div>
    <div class="channel">Music Channel <button class="remove-btn">✖</button></div>
    <div class="channel">Wii Speak <button class="remove-btn">✖</button></div>
    <div class="channel">Transfer Tool <button class="remove-btn">✖</button></div>
  </div>

  <div class="bottombar">
    <div class="icons">
      <div class="icon">Wii</div>
      <div class="icon">SD</div>
    </div>
    <div class="date-time" id="datetime"></div>
    <div class="icons">
      <button class="add-channel-btn" onclick="openAddChannelModal()">+ Add Channel</button>
      <button class="toggle-edit-btn" id="editToggle" onclick="toggleEditMode()">Toggle Edit</button>
<button class="toggle-image-btn" id="imageToggle" onclick="toggleImageMode()">Toggle Image Mode</button>

      <div class="icon">✉</div>
    </div>
  </div>

  <!-- Channel Popup Modal -->
  <div id="channelModal" class="modal">
    <div class="modal-content">
      <h2 id="modalTitle">Add New Channel</h2>
      <label>
        Channel Name:
        <input type="text" id="channelNameInput">
      </label>
      <label>
        Channel Link:
        <input type="url" id="channelLinkInput">
      </label>
      <label>
        Background URL:
        <input type="url" id="channelBgInput">
      </label>
      <label>
        Or Upload Background:
        <input type="file" id="channelBgFile" accept="image/*">
      </label>
      <div class="modal-buttons">
        <button onclick="saveModalChannel()">Save</button>
        <button onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Channel background overlay -->
  <div id="channelBackground"></div>

<script>
  let editMode = false;
  let dragged = null;
  let editingChannel = null;

  // --- Date/time ---
  function updateDateTime() {
    const now = new Date();
    const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    const date = now.toLocaleDateString([], {weekday: 'short', month: 'numeric', day: 'numeric'});
    document.getElementById('datetime').textContent = `${time} | ${date}`;
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  // --- Save & Load channels ---
  function saveChannels() {
    const menu = document.getElementById("menu");
    const data = Array.from(menu.children).map(ch => ({
      name: ch.childNodes[0].textContent.trim(),
      link: ch.getAttribute("data-link") || "",
      bg: ch.getAttribute("data-bg") || ""
    }));
    localStorage.setItem("channels", JSON.stringify(data));
  }

  function loadChannels() {
    const saved = localStorage.getItem("channels");
    if (!saved) return;
    const channels = JSON.parse(saved);
    const menu = document.getElementById("menu");
    menu.innerHTML = "";

    channels.forEach(ch => {
      const newChannel = document.createElement("div");
      newChannel.className = "channel";
      newChannel.setAttribute("data-link", ch.link);
      newChannel.setAttribute("data-bg", ch.bg || "");
      newChannel.innerHTML = `${ch.name} <button class="remove-btn">✖</button>`;
      setupChannel(newChannel);
      menu.appendChild(newChannel);
    });
  }

  // --- Modal Controls ---
  function openAddChannelModal() {
    editingChannel = null;
    document.getElementById("modalTitle").textContent = "Add New Channel";
    document.getElementById("channelNameInput").value = "";
    document.getElementById("channelLinkInput").value = "";
    document.getElementById("channelBgInput").value = "";
    document.getElementById("channelBgFile").value = "";
    document.getElementById("channelModal").classList.add("show");
  }

  function openEditChannelModal(channel) {
    editingChannel = channel;
    document.getElementById("modalTitle").textContent = "Edit Channel";
    document.getElementById("channelNameInput").value = channel.childNodes[0].textContent.trim();
    document.getElementById("channelLinkInput").value = channel.getAttribute("data-link") || "";
    document.getElementById("channelBgInput").value = channel.getAttribute("data-bg") || "";
    document.getElementById("channelBgFile").value = "";
    document.getElementById("channelModal").classList.add("show");
  }

  function closeModal() {
    document.getElementById("channelModal").classList.remove("show");
  }

  function saveModalChannel() {
    const name = document.getElementById("channelNameInput").value.trim();
    const link = document.getElementById("channelLinkInput").value.trim();
    const bgUrl = document.getElementById("channelBgInput").value.trim();
    const fileInput = document.getElementById("channelBgFile");
    if (!name) return;

    const saveChannel = (finalBg) => {
      if (editingChannel) {
        editingChannel.childNodes[0].textContent = name + " ";
        editingChannel.setAttribute("data-link", link);
        editingChannel.setAttribute("data-bg", finalBg);
      } else {
        const menu = document.getElementById("menu");
        const newChannel = document.createElement("div");
        newChannel.className = "channel";
        newChannel.setAttribute("data-link", link);
        newChannel.setAttribute("data-bg", finalBg);
        newChannel.innerHTML = `${name} <button class="remove-btn">✖</button>`;
        setupChannel(newChannel);
        menu.appendChild(newChannel);
      }
      saveChannels();
      closeModal();
    };

    if (fileInput.files && fileInput.files[0]) {
      const reader = new FileReader();
      reader.onload = (e) => {
        saveChannel(e.target.result); // Base64 string
      };
      reader.readAsDataURL(fileInput.files[0]);
    } else {
      saveChannel(bgUrl);
    }
  }

  // --- Setup channel ---
  function setupChannel(channel) {
    const removeBtn = channel.querySelector(".remove-btn");

    removeBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      if (editMode) {
        channel.remove();
        saveChannels();
      }
    });

    channel.addEventListener("dragstart", (e) => {
      if (!editMode) return e.preventDefault();
      dragged = channel;
      setTimeout(() => channel.style.display = "none", 0);
    });

    channel.addEventListener("dragend", () => {
      if (dragged) {
        dragged.style.display = "flex";
        dragged = null;
        saveChannels();
      }
    });

    channel.addEventListener("dragover", (e) => {
      if (editMode) e.preventDefault();
    });

    channel.addEventListener("drop", (e) => {
      if (editMode && dragged && dragged !== channel) {
        e.preventDefault();
        const menu = document.getElementById("menu");
        const children = Array.from(menu.children);
        const draggedIndex = children.indexOf(dragged);
        const targetIndex = children.indexOf(channel);

        if (draggedIndex < targetIndex) {
          menu.insertBefore(dragged, channel.nextSibling);
        } else {
          menu.insertBefore(dragged, channel);
        }
        saveChannels();
      }
    });

    channel.addEventListener("click", function () {
      if (editMode) return;

      document.querySelectorAll(".channel").forEach(ch => ch.classList.remove("selected"));
      channel.classList.add("opening");

      const bg = document.getElementById("channelBackground");
      const bgUrl = channel.getAttribute("data-bg");
      if (bgUrl) {
        bg.style.background = `url('${bgUrl}') center/cover no-repeat`;
      } else {
        bg.style.background = "linear-gradient(to bottom, #e5e5e5, #dcdcdc)";
      }
      bg.classList.add("show");

      let overlay = document.querySelector(".channel-overlay");
      if (!overlay) {
        overlay = document.createElement("div");
        overlay.className = "channel-overlay";
        overlay.innerHTML = `
          <button id="menuBtn">Wii Menu</button>
          <button id="startBtn">Start</button>
        `;
        document.body.appendChild(overlay);

        document.getElementById("menuBtn").addEventListener("click", () => {
          overlay.classList.remove("show");
          channel.classList.remove("opening", "fade-out");
          document.getElementById("channelBackground").classList.remove("show");
          setTimeout(() => overlay.remove(), 500);
        });

        document.getElementById("startBtn").addEventListener("click", () => {
          const link = channel.getAttribute("data-link");
          if (link) {
            window.open(link, "_blank");
          } else {
            alert("No link set for this channel.");
          }
          overlay.classList.remove("show");
          channel.classList.remove("opening", "fade-out");
          document.getElementById("channelBackground").classList.remove("show");
          setTimeout(() => overlay.remove(), 500);
        });
      }

      setTimeout(() => {
        channel.classList.add("fade-out");
        overlay.classList.add("show");
      }, 600);
    });

    channel.addEventListener("contextmenu", (e) => {
      if (!editMode) return;
      e.preventDefault();
      openEditChannelModal(channel);
    });
  }

  // --- Toggle edit mode ---
  function toggleEditMode() {
    editMode = !editMode;
    document.getElementById("editToggle").classList.toggle("active", editMode);

    document.querySelectorAll(".channel").forEach(channel => {
      if (editMode) {
        channel.classList.remove("selected");
        channel.classList.add("edit-mode");
        channel.setAttribute("draggable", true);
      } else {
        channel.classList.remove("edit-mode");
        channel.removeAttribute("draggable");
      }
    });
  }

  // --- Init ---
  loadChannels();
  if (document.querySelectorAll(".channel").length > 0) {
    document.querySelectorAll(".channel").forEach(setupChannel);
  }

let imageMode = false;

function toggleImageMode() {
  imageMode = !imageMode;
  document.body.classList.toggle("image-mode", imageMode);

  const btn = document.getElementById("imageToggle");
  btn.classList.toggle("active", imageMode);

  // Update channel visuals
  document.querySelectorAll(".channel").forEach(ch => {
    const bg = ch.getAttribute("data-bg");
    if (imageMode && bg) {
      ch.style.backgroundImage = `url('${bg}')`;
    } else {
      ch.style.backgroundImage = "";
    }
  });

  localStorage.setItem("imageMode", imageMode);
}

// Load mode on startup
window.addEventListener("load", () => {
  const saved = localStorage.getItem("imageMode") === "true";
  if (saved) {
    imageMode = true;
    toggleImageMode();
  }
});


</script>

</body>
</html>
